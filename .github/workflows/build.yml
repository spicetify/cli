name: Build

on:
   pull_request:
      branches:
         - next
         - "*/next/**"
   push:
      branches:
         - next
         - "*/next/**"

jobs:
   build:
      name: Build
      runs-on: ubuntu-latest

      steps:
      -  name: Checkout
         uses: actions/checkout@v4

      -  name: Setup Go
         uses: actions/setup-go@v5
         with:
            go-version-file: "go.mod"

      -  name: Build
         run: go build .

      -  name: Format
         run: |
            gofmt -s -l .
            if [ "$(gofmt -s -l . | wc -l)" -gt 0 ]; then exit 1; fi
